sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","mrpl/mm/releasedprs/purchasereq/model/formatter","sap/ui/core/format/DateFormat","sap/ui/comp/valuehelpdialog/ValueHelpDialog","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/model/FilterType","sap/ui/model/odata/v2/ODataModel"],function(e,t,i,s,n,a,r,o,u,l){"use strict";return e.extend("mrpl.mm.releasedprs.purchasereq.controller.Overview",{formatter:s,onInit:function(){this.oFilterBar=this.getView().byId("filterbar")},onSearch:function(){var e=this.oFilterBar.getFilterGroupItems().reduce(function(e,s){var n=s.getControl(),a=n.getValue(),r=[];if(a){var o;if(s.getName().includes("Date")||s.getName().includes("Time")){var u=a.split("/");if(u.length===3){var l=parseInt(u[0],10);var h=parseInt(u[1],10)-1;var c=parseInt(u[2],10);c+=2e3;o=new Date(c,h,l,5,30)}else{console.error("Invalid date format:",a);return e}}else{o=a}if(o){r.push(new t({path:s.getName(),operator:i.EQ,value1:o}));e.push(new t({filters:r,and:false}))}}else{console.warn(`No value provided for filter: ${s.getName()}`)}return e},[]);this.getView().byId("table").getBinding("items").filter(e,u.Application)},formatTime:function(e){if(e){var t=n.getTimeInstance({pattern:"HH:mm:ss"});var i=new Date(e);return t.format(i)}return e},onRowSelectionChange:function(e){var t=e.getParameter("listItem");var i=t.getBindingContext();var s=i.getProperty("PurchaseRequisition");this.getOwnerComponent().getRouter().navTo("OverViewDetailsPage",{PurchaseRequisition:s})},onFilterChange:function(e){console.log("Filter Changed")},onAfterVariantLoad:function(e){console.log("Variant loaded")},onValueHelpRequestPurchaseRequisition:function(e){this._oInput=e.getSource();if(!this.PurchaseRequisition){r.load({id:this.getView().getId(),name:"mrpl.mm.releasedprs.purchasereq.view.PurchaseRequisition",controller:this}).then(function(e){this.PurchaseRequisition=e;this.getView().addDependent(this.PurchaseRequisition);this.PurchaseRequisition.open()}.bind(this))}else{this.PurchaseRequisition.open()}},onPurchaseRequisitionChange:function(e){var t=e.getParameter("listItem");if(t&&this._oInput){var i=t.getTitle();this._oInput.setValue(i);this.PurchaseRequisition.close()}},onRequisitionclose:function(){if(this.PurchaseRequisition){this.PurchaseRequisition.close()}},onValueHelpRequestPurReqnReleaseStatus:function(e){this._oInput=e.getSource();if(!this.PurReqnReleaseStatus){r.load({id:this.getView().getId(),name:"mrpl.mm.releasedprs.purchasereq.view.PurReqnReleaseStatus",controller:this}).then(function(e){this.PurReqnReleaseStatus=e;this.getView().addDependent(this.PurReqnReleaseStatus);this.PurReqnReleaseStatus.open()}.bind(this))}else{this.PurReqnReleaseStatus.open()}},onPurReqnReleaseStatusChange:function(e){var t=e.getParameter("listItem");if(t&&this._oInput){var i=t.getTitle();this._oInput.setValue(i);this.PurReqnReleaseStatus.close()}},onReleaseStatusClose:function(){if(this.PurReqnReleaseStatus){this.PurReqnReleaseStatus.close()}},onValueHelpRequestPurchaseRequisitionPrice:function(e){this._oInput=e.getSource();if(!this.PurchaseRequisitionPrice){r.load({id:this.getView().getId(),name:"mrpl.mm.releasedprs.purchasereq.view.PurchaseRequisitionPrice",controller:this}).then(function(e){this.PurchaseRequisitionPrice=e;this.getView().addDependent(this.PurchaseRequisitionPrice);this.PurchaseRequisitionPrice.open()}.bind(this))}else{this.PurchaseRequisitionPrice.open()}},onPurchaseRequisitionPriceChange:function(e){var t=e.getParameter("listItem");if(t&&this._oInput){var i=t.getTitle();this._oInput.setValue(i);this.PurchaseRequisitionPrice.close()}},onRequisitionPriceClose:function(){if(this.PurchaseRequisitionPrice){this.PurchaseRequisitionPrice.close()}},onValueHelpRequestCreationDate:function(e){this._oInput=e.getSource();if(!this.CreationDate){r.load({id:this.getView().getId(),name:"mrpl.mm.releasedprs.purchasereq.view.CreationDate",controller:this}).then(function(e){this.CreationDate=e;this.getView().addDependent(this.CreationDate);this.CreationDate.open()}.bind(this))}else{this.CreationDate.open()}},onCreationDateChange:function(e){var t=e.getParameter("listItem");if(t&&this._oInput){var i=t.getTitle();this._oInput.setValue(i);this.CreationDate.close()}},onCreationDateClose:function(){if(this.CreationDate){this.CreationDate.close()}},onValueHelpRequestDeliveryDate:function(e){this._oInput=e.getSource();if(!this.DeliveryDate){r.load({id:this.getView().getId(),name:"mrpl.mm.releasedprs.purchasereq.view.DeliveryDateTime",controller:this}).then(function(e){this.DeliveryDate=e;this.getView().addDependent(this.DeliveryDate);this.DeliveryDate.open()}.bind(this))}else{this.DeliveryDate.open()}},onDeliveryDateChange:function(e){var t=e.getParameter("listItem");if(t&&this._oInput){var i=t.getTitle();this._oInput.setValue(i);this.DeliveryDate.close()}},onDeliveryDateClose:function(){if(this.DeliveryDate){this.DeliveryDate.close()}},onValueHelpRequestPurchasingDocumentItem:function(e){this._oInput=e.getSource();if(!this.PurchasingDocumentItem){r.load({id:this.getView().getId(),name:"mrpl.mm.releasedprs.purchasereq.view.PurchasingDocumentItem",controller:this}).then(function(e){this.PurchasingDocumentItem=e;this.getView().addDependent(this.PurchasingDocumentItem);this.PurchasingDocumentItem.open()}.bind(this))}else{this.PurchasingDocumentItem.open()}},onPurchasingDocumentItemChange:function(e){var t=e.getParameter("listItem");if(t&&this._oInput){var i=t.getTitle();this._oInput.setValue(i);this.PurchasingDocumentItem.close()}},onPurchasingDocumentItemclose:function(){if(this.PurchasingDocumentItem){this.PurchasingDocumentItem.close()}}})});
//# sourceMappingURL=Overview.controller.js.map