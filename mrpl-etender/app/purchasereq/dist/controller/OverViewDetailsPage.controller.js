sap.ui.define(["sap/ui/core/mvc/Controller","sap/suite/ui/commons/library","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/core/format/DateFormat","mrpl/mm/releasedprs/purchasereq/model/formatter"],function(e,t,a,r,s,o,i,n){"use strict";return e.extend("mrpl.mm.releasedprs.purchasereq.controller.OverViewDetailsPage",{formatter:n,onInit:function(){var e=this.getView();this.oOverViewDetailsPage1=e.byId("processflow1");this.oOverViewDetailsPage2=e.byId("processflow2");var t={lanes:[],nodes:[]};var r=new a(t);e.setModel(r);this.tileModel=new a;this.getView().setModel(this.tileModel,"tileJSONModel");this.getRouter().getRoute("OverViewDetailsPage").attachPatternMatched(this._onObjectMatched,this)},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},_onObjectMatched:function(e){var t=e.getParameter("arguments").PurchaseRequisition;this._loadPurchaseRequisitionDetails(t)},_loadPurchaseRequisitionDetails:function(e){var t=this.getOwnerComponent().getModel();var a="/ZC_MM_PURREQ";var r=[new sap.ui.model.Filter("PurchaseRequisition",sap.ui.model.FilterOperator.EQ,e)];t.read(a,{filters:r,success:function(e){console.log(e);var t=e.results&&e.results.length>0?e.results[0]:null;this.tileModel.setData(e);var a=new sap.ui.model.json.JSONModel(t);this.getView().setModel(a,"tileJSONModel");this.onSetLanesPress()}.bind(this),error:function(e){console.error("Error fetching data from OData service:",e)}})},onSetLanesPress:function(){var e=this.tileModel.getData().results?this.tileModel.getData().results[0]:null;if(e){var t=e.PurchaseRequisitionItemText;var a=e.PurReqnReleaseStatus;var r=e.AccountAssignmentCategory;console.log(r);var s=this.getView();var o=s.getModel();var i=parseInt(a,10);var n=[];var l=[];for(var c=0;c<i;c++){var u="";switch(c){case 0:u="CEG Form";break;case 1:u="PQC Form";break;case 2:u="Single certificate tender Form";break;case 3:u="Austerity approval Form";break;case 4:u="Tender document";break;case 5:u="EMD Form";break;case 6:u="BID Evaluation Form";break;default:break}n.push({id:c.toString(),icon:"sap-icon://order-status",label:u,position:c});var d=c===i-1;var m=d?"Negative":"Neutral";var g=d;l.push({id:(c+1).toString(),lane:c.toString(),title:t,state:m,stateText:"300000000"+(c+1),focused:g,highlighted:false,children:null})}o.setProperty("/lanes",n);o.setProperty("/nodes",l)}else{console.error("No data found in tileModel.")}},onNodePress:function(e){var t=e.getParameters().getNodeId();console.log(t);if(sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService)var a=sap.ushell.Container.getService("CrossApplicationNavigation");{switch(t){case"1":a.toExternal({target:{semanticObject:"ceg",action:"ceg"}});break;case"2":a.toExternal({target:{semanticObject:"pqcform",action:"pqcform"}});break;case"3":a.toExternal({target:{semanticObject:"singletendercert",action:"singletendercert"}});break;case"4":a.toExternal({target:{semanticObject:"austerityapproval",action:"austerityapproval"}});break;case"5":a.toExternal({target:{semanticObject:"tenderdocument",action:"tenderdocument"}});break;case"6":a.toExternal({target:{semanticObject:"emp_details_form",action:"emp_details_form"}});break;case"7":a.toExternal({target:{semanticObject:"bidevaluation",action:"bidevaluation"}});break;default:r.show("Form was not valid")}}},formatTime:function(e){if(e){var t=i.getTimeInstance({pattern:"HH:mm:ss"});var a=new Date(e);return t.format(a)}return e}})});
//# sourceMappingURL=OverViewDetailsPage.controller.js.map